import Image from "next/image"
import { useState } from "react";

const fallback =
`<svg width='36' height='39' viewBox='0 0 36 39' fill='none' xmlns='http://www.w3.org/2000/svg'> <path d='M0.810547 38H0.318359V35.1562H0.810547V38ZM2.05859 35.1562L2.87891 37.3359L3.69727 35.1562H4.33594V38H3.84375V37.0625L3.89258 35.8086L3.05273 38H2.69922L1.86133 35.8105L1.91016 37.0625V38H1.41797V35.1562H2.05859ZM6.54883 37.3379H5.44727L5.2168 38H4.70312L5.77734 35.1562H6.2207L7.29688 38H6.78125L6.54883 37.3379ZM5.58594 36.9395H6.41016L5.99805 35.7598L5.58594 36.9395ZM9.75781 37.6309C9.65495 37.765 9.51237 37.8665 9.33008 37.9355C9.14779 38.0046 8.94076 38.0391 8.70898 38.0391C8.4707 38.0391 8.25977 37.985 8.07617 37.877C7.89258 37.7689 7.75065 37.6146 7.65039 37.4141C7.55143 37.2122 7.5 36.9772 7.49609 36.709V36.4863C7.49609 36.0566 7.59896 35.7214 7.80469 35.4805C8.01042 35.2383 8.29753 35.1172 8.66602 35.1172C8.98242 35.1172 9.23372 35.1953 9.41992 35.3516C9.60612 35.5078 9.7181 35.7331 9.75586 36.0273H9.27148C9.2168 35.6849 9.01823 35.5137 8.67578 35.5137C8.45443 35.5137 8.28581 35.5938 8.16992 35.7539C8.05534 35.9128 7.99609 36.1465 7.99219 36.4551V36.6738C7.99219 36.9811 8.05664 37.2201 8.18555 37.3906C8.31576 37.5599 8.49609 37.6445 8.72656 37.6445C8.97917 37.6445 9.15885 37.5872 9.26562 37.4727V36.916H8.67969V36.541H9.75781V37.6309ZM11.9629 36.7305H10.7949V37.6055H12.1602V38H10.3008V35.1562H12.1465V35.5547H10.7949V36.3398H11.9629V36.7305ZM15.8145 38H15.3203L14.0527 35.9824V38H13.5586V35.1562H14.0527L15.3242 37.1816V35.1562H15.8145V38ZM18.668 36.6523C18.668 36.931 18.6198 37.1758 18.5234 37.3867C18.4271 37.5964 18.2891 37.7578 18.1094 37.8711C17.931 37.9831 17.7253 38.0391 17.4922 38.0391C17.2617 38.0391 17.056 37.9831 16.875 37.8711C16.6953 37.7578 16.556 37.597 16.457 37.3887C16.3594 37.1803 16.3099 36.9401 16.3086 36.668V36.5078C16.3086 36.2305 16.3574 35.9857 16.4551 35.7734C16.554 35.5612 16.6927 35.3991 16.8711 35.2871C17.0508 35.1738 17.2565 35.1172 17.4883 35.1172C17.7201 35.1172 17.9251 35.1732 18.1035 35.2852C18.2832 35.3958 18.4219 35.556 18.5195 35.7656C18.6172 35.974 18.6667 36.2168 18.668 36.4941V36.6523ZM18.1738 36.5039C18.1738 36.1888 18.1139 35.9473 17.9941 35.7793C17.8757 35.6113 17.707 35.5273 17.4883 35.5273C17.2747 35.5273 17.1074 35.6113 16.9863 35.7793C16.8665 35.946 16.8053 36.1823 16.8027 36.4883V36.6523C16.8027 36.9648 16.8633 37.2064 16.9844 37.377C17.1068 37.5475 17.276 37.6328 17.4922 37.6328C17.7109 37.6328 17.8789 37.5495 17.9961 37.3828C18.1146 37.2161 18.1738 36.9727 18.1738 36.6523V36.5039ZM21.0469 35.5547H20.1602V38H19.6699V35.5547H18.791V35.1562H21.0469V35.5547ZM23.9395 36.7949H22.7949V38H22.3008V35.1562H24.1074V35.5547H22.7949V36.4004H23.9395V36.7949ZM26.7695 36.6523C26.7695 36.931 26.7214 37.1758 26.625 37.3867C26.5286 37.5964 26.3906 37.7578 26.2109 37.8711C26.0326 37.9831 25.8268 38.0391 25.5938 38.0391C25.3633 38.0391 25.1576 37.9831 24.9766 37.8711C24.7969 37.7578 24.6576 37.597 24.5586 37.3887C24.4609 37.1803 24.4115 36.9401 24.4102 36.668V36.5078C24.4102 36.2305 24.459 35.9857 24.5566 35.7734C24.6556 35.5612 24.7943 35.3991 24.9727 35.2871C25.1523 35.1738 25.3581 35.1172 25.5898 35.1172C25.8216 35.1172 26.0267 35.1732 26.2051 35.2852C26.3848 35.3958 26.5234 35.556 26.6211 35.7656C26.7188 35.974 26.7682 36.2168 26.7695 36.4941V36.6523ZM26.2754 36.5039C26.2754 36.1888 26.2155 35.9473 26.0957 35.7793C25.9772 35.6113 25.8086 35.5273 25.5898 35.5273C25.3763 35.5273 25.209 35.6113 25.0879 35.7793C24.9681 35.946 24.9069 36.1823 24.9043 36.4883V36.6523C24.9043 36.9648 24.9648 37.2064 25.0859 37.377C25.2083 37.5475 25.3776 37.6328 25.5938 37.6328C25.8125 37.6328 25.9805 37.5495 26.0977 37.3828C26.2161 37.2161 26.2754 36.9727 26.2754 36.6523V36.5039ZM29.3418 35.1562V37.0566C29.3418 37.3587 29.2448 37.5983 29.0508 37.7754C28.8581 37.9512 28.6009 38.0391 28.2793 38.0391C27.9538 38.0391 27.6953 37.9525 27.5039 37.7793C27.3125 37.6048 27.2168 37.3633 27.2168 37.0547V35.1562H27.709V37.0586C27.709 37.2487 27.7572 37.3939 27.8535 37.4941C27.9499 37.5944 28.0918 37.6445 28.2793 37.6445C28.6595 37.6445 28.8496 37.444 28.8496 37.043V35.1562H29.3418ZM32.127 38H31.6328L30.3652 35.9824V38H29.8711V35.1562H30.3652L31.6367 37.1816V35.1562H32.127V38ZM32.7109 38V35.1562H33.5508C33.8021 35.1562 34.0247 35.2122 34.2188 35.3242C34.4141 35.4362 34.5651 35.5951 34.6719 35.8008C34.7786 36.0065 34.832 36.2422 34.832 36.5078V36.6504C34.832 36.9199 34.778 37.1569 34.6699 37.3613C34.5632 37.5658 34.4102 37.7233 34.2109 37.834C34.013 37.9447 33.7858 38 33.5293 38H32.7109ZM33.2051 35.5547V37.6055H33.5273C33.7865 37.6055 33.985 37.5247 34.123 37.3633C34.2624 37.2005 34.3333 36.9674 34.3359 36.6641V36.5059C34.3359 36.1973 34.2689 35.9616 34.1348 35.7988C34.0007 35.6361 33.806 35.5547 33.5508 35.5547H33.2051Z' fill='%23C4C4C4'/> <path d='M34 0H2C0.89543 0 0 0.89543 0 2V29C0 30.1046 0.89543 31 2 31H34C35.1046 31 36 30.1046 36 29V2C36 0.89543 35.1046 0 34 0Z' fill='%23E7E7E7'/> <path d='M9.5 10.5L19.5 20.5L28.5 13.5L36 20V29C36 30.105 35.1046 31 34 31H2C0.8954 31 0 30.105 0 29V20L9.5 10.5Z' fill='%23C4C4C4'/></svg>`


type NextImageProps = {
    src: string;
    alt?: string;
    fallBackImage?: Boolean;
    blurDataURL?: string;
};

export const NextImage: React.FC<NextImageProps & Record<string,any>> = ({ 
    src, 
    alt, 
    fallBackImage = true,
    blurDataURL,
    ...rest 
}) => {
    const [imgSrc, setImgSrc] = useState(src);
    const fallBackSrc = `data:image/svg+xml;utf8,${fallback}`;

    return (
        <Image
            {...rest}
            src={imgSrc}
            onError={() => {
                fallBackImage ? setImgSrc(fallBackSrc) : null;
            }}
            placeholder="blur"
            blurDataURL={"LZNjOv0bGtj0^Y*}S}s;TGr=adxV" || blurDataURL}
            alt={alt}
        />
    );
};

export default NextImage;
